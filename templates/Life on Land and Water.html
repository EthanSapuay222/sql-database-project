{% extends 'base.html' %}

{% block title %}Life on Land & Water{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/FP.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/species.css') }}" />
{% endblock %}

{% block content %}
<body>
    <header style="background: #104F17; border-bottom: 4px solid var(--accent); color: white;" class="p-4 flex justify-between items-center shadow-lg">
      <a class="back-button" href="{{ url_for('pages.index') }}">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10 12L6 8L10 4"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        Back to Mainpage
      </a>
      <h1 style="color: white;">LIFE ON LAND & LIFE ON WATER</h1>
      <div class="subtitle">
        Exploring the Diversity of Terrestrial and Aquatic Species
      </div>
    </header>

    <div class="container">
      <!-- Tab Navigation -->
      <div class="species-tabs">
        <button class="tab-btn active" data-category="land">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          </svg>
          Life on Land
        </button>
        <button class="tab-btn" data-category="water">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
          </svg>
          Life on Water
        </button>
      </div>

      <!-- Land Species Grid -->
      <div id="land-species" class="species-gallery">
        {% for species in land_species %}
        <div class="animal-card" 
             data-id="{{ species.species_id }}"
             data-name="{{ species.common_name }}"
             data-scientific="{{ species.scientific_name }}"
             data-type="{{ species.species_type|title if species.species_type else 'Unknown' }}"
             data-status="{{ species.conservation_status if species.conservation_status else 'Unknown' }}"
             data-trend="{{ species.status_trend if species.status_trend else 'unknown' }}"
             data-sightings="{{ species.total_sightings_estimate if species.total_sightings_estimate else 'Unknown' }}"
             data-description="{{ species.description if species.description else 'No description available.' }}"
             data-habitat="{{ species.habitat_info if species.habitat_info else 'No habitat information available.' }}"
             data-diet="{{ species.diet_info if species.diet_info else 'No diet information available.' }}"
             data-image="{{ species.photo_url if species.photo_url else '/static/img/Animals/placeholder.jpg' }}">
          <div class="animal-image-container">
            <img src="{{ species.photo_url if species.photo_url else '/static/img/Animals/placeholder.jpg' }}" 
                 alt="{{ species.common_name }}" 
                 class="animal-image"
                 onerror="this.src='/static/img/Animals/placeholder.jpg'">
            <div class="animal-overlay">
              <button class="view-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                View Details
              </button>
            </div>
          </div>
          <div class="animal-info">
            <h3 class="animal-name">{{ species.common_name }}</h3>
            <p class="animal-scientific">{{ species.scientific_name }}</p>
            <span class="animal-status status-{{ species.conservation_status|lower|replace(' ', '-') if species.conservation_status else 'unknown' }}">
              {{ species.conservation_status if species.conservation_status else 'Unknown' }}
            </span>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Water Species Grid -->
      <div id="water-species" class="species-gallery" style="display: none;">
        {% for species in water_species %}
        <div class="animal-card"
             data-id="{{ species.species_id }}"
             data-name="{{ species.common_name }}"
             data-scientific="{{ species.scientific_name }}"
             data-type="{{ species.species_type|title if species.species_type else 'Unknown' }}"
             data-status="{{ species.conservation_status if species.conservation_status else 'Unknown' }}"
             data-trend="{{ species.status_trend if species.status_trend else 'unknown' }}"
             data-sightings="{{ species.total_sightings_estimate if species.total_sightings_estimate else 'Unknown' }}"
             data-description="{{ species.description if species.description else 'No description available.' }}"
             data-habitat="{{ species.habitat_info if species.habitat_info else 'No habitat information available.' }}"
             data-diet="{{ species.diet_info if species.diet_info else 'No diet information available.' }}"
             data-image="{{ species.photo_url if species.photo_url else '/static/img/Animals/placeholder.jpg' }}">
          <div class="animal-image-container">
            <img src="{{ species.photo_url if species.photo_url else '/static/img/Animals/placeholder.jpg' }}" 
                 alt="{{ species.common_name }}" 
                 class="animal-image"
                 onerror="this.src='/static/img/Animals/placeholder.jpg'">
            <div class="animal-overlay">
              <button class="view-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                View Details
              </button>
            </div>
          </div>
          <div class="animal-info">
            <h3 class="animal-name">{{ species.common_name }}</h3>
            <p class="animal-scientific">{{ species.scientific_name }}</p>
            <span class="animal-status status-{{ species.conservation_status|lower|replace(' ', '-') if species.conservation_status else 'unknown' }}">
              {{ species.conservation_status if species.conservation_status else 'Unknown' }}
            </span>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Species Detail Modal -->
    <div id="species-modal" class="modal-overlay">
      <div class="modal-content">
        <button class="modal-close" id="modal-close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        
        <div class="modal-body">
          <div class="modal-image-section">
            <img id="modal-image" src="" alt="" class="modal-image">
          </div>
          
          <div class="modal-details-section">
            <div class="modal-header">
              <h2 id="modal-name" class="modal-title"></h2>
              <p id="modal-scientific" class="modal-scientific"></p>
              <span id="modal-status" class="modal-status-badge"></span>
            </div>
            
            <div class="modal-info-grid">
              <div class="modal-info-item">
                <span class="modal-info-label">Type</span>
                <span id="modal-type" class="modal-info-value"></span>
              </div>
              <div class="modal-info-item">
                <span class="modal-info-label">Population Trend</span>
                <span id="modal-trend" class="modal-info-value"></span>
              </div>
              <div class="modal-info-item">
                <span class="modal-info-label">Est. Sightings</span>
                <span id="modal-sightings" class="modal-info-value"></span>
              </div>
            </div>
            
            <div class="modal-section">
              <h4 class="modal-section-title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="16" x2="12" y2="12"></line>
                  <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                About
              </h4>
              <p id="modal-description" class="modal-section-content"></p>
            </div>
            
            <div class="modal-section">
              <h4 class="modal-section-title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9,22 9,12 15,12 15,22"></polyline>
                </svg>
                Habitat
              </h4>
              <p id="modal-habitat" class="modal-section-content"></p>
            </div>
            
            <div class="modal-section">
              <h4 class="modal-section-title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                  <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                  <line x1="6" y1="1" x2="6" y2="4"></line>
                  <line x1="10" y1="1" x2="10" y2="4"></line>
                  <line x1="14" y1="1" x2="14" y2="4"></line>
                </svg>
                Diet
              </h4>
              <p id="modal-diet" class="modal-section-content"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer style="background: #104F17; color: #fff;">
      <p>Explore more about the Life on Land & Life on Water.</p>
    </footer>

    <script src="{{ url_for('static', filename='js/species.js') }}"></script>
{% endblock %}
